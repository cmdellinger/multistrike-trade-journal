<mat-accordion>
    <mat-expansion-panel hideToggle>
    <mat-expansion-panel-header>
        <mat-panel-title> {{tradeIdea.ticker}} </mat-panel-title>
        <mat-panel-description> Setup: Breakout </mat-panel-description>
    </mat-expansion-panel-header>
    <p>Attempted to long the breakout of $10,000 level. (fictional)</p>
    </mat-expansion-panel>
    <mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
    <mat-expansion-panel-header>
        <mat-panel-title>
          Attempts:
          @for (tradeAttempt of tradeIdea.attempts; track $index) {
            @if (isTradeAttemptProfitable(tradeAttempt)){
              ✔
            } @else {
              ✘
            }
          }
        </mat-panel-title>
        <mat-panel-description>
          {{panelOpenState() ? 'Close ⬆️' : 'Trade Details ⬇️'}}
        </mat-panel-description>
    </mat-expansion-panel-header>
      @for (tradeAttempt of tradeIdea.attempts; track $index) {
        <div>
          <h3>Attempt {{ $index + 1 }} [PnL: {{ tradeAttemptPnl(tradeAttempt) }}]</h3>
          <h4>opens</h4>
            <app-trade-attempt-table [trades]="tradeAttempt.opens"></app-trade-attempt-table>
          <h4>closes</h4>
            <app-trade-attempt-table [trades]="tradeAttempt.closes"></app-trade-attempt-table>
        </div>
      }
    </mat-expansion-panel>
</mat-accordion>

